---
id: 1581
title: Применение LM2596 в устройствах и разводка платы
date: 2014-05-31T17:28:08+00:00
author: Catethysis
layout: post
guid: http://catethysis.ru/?p=1581
permalink: /lm2596-tips-and-tricks/
ratings_users:
  - 4
ratings_score:
  - 16
ratings_average:
  - 4
wp_noextrenallinks_mask_links:
  - 0
dsq_thread_id:
  - 2726268572
categories:
  - Питание
---
В [прошлой статье](http://catethysis.ru/lm2596_dc-dc_converter/ "DC–DC преобразователь LM2596") я говорил о готовом преобразователе на базе этой микросхемы. Теперь поговорим о внедрении микросхемы в своё устройство: необходимые элементы обвязки, рекомендации по выбору номиналов и разводке платы, и всё такое.

<!--more-->

### Расчёт элементов обвязки для импульсного источника питания {#a1}

<p align="left">
  Для начала, определимся с входным и выходным напряжением, а также выходным током. Пускай это будет 12 вольт –> 3.3 вольт при 3А. Значит, разница напряжений вход–выход составит порядка 9 вольт.
</p>

<p align="left">
  Сначала подбираем индуктивность. Её значение зависит от тока (при маленьком &#8212; 6, при большом &#8212; 11), но в среднем &#8212; 8 микрогенри на 1 вольт разницы напряжений вход–выход. Так что нам понадобится дроссель на 9 вольт * 8 мкГн/вольт = 72 мкГн — ближайшее значение 68 мкГн, но стоит взять больше. Предельный постоянный ток катушки должен быть больше выходного тока микросхемы.
</p>

<p align="left">
  Если вы собрались самостоятельно изготовить дроссель — сначала следует его рассчитать.<br /> Первое — это выбор подходящего провода. Исходите из плотности 6 А/мм2, т.е. в нашем случае понадобится провод сечением 0.5мм2. Правильнее если это будет многожильный провод или литцендрат — уменьшатся потери на скин–эффект. Я предлагаю использовать плотность меньше обычных 8 А/мм2, поскольку охлаждение будет затруднено (т.к. катушку надо будет залить каким–то клеем или компаундом), но ещё важнее что эффективное сечение провода уменьшится из–за скин–эффекта.<br /> Теперь рассчитываем сам сердечник, воспользуемся его справочными данными. Нас интересует параметр Al — он показывает индуктивность в нГн на квадратный виток. Т.е. необходимое число витков будет равно корню из (требуемая индуктивность)/Al. Допустим, Epcos R10x6x4 из материала N87 имеет Al = 900нГн/вит2. Значит, для получения индуктивности 72мкГн нужно намотать 9 витков. Однако, сердечник может не выдержать получающееся магнитное поле, и уйти в насыщение. Также, поскольку дроссель работает с ненулевой постоянной составляющей тока, нужно либо пропиливать небольшой зазор в сердечнике, либо использовать сердечник из порошкового железа.
</p>

Теперь нужно выбрать выходной конденсатор. Таблица ёмкостей приведена в <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://static.catethysis.ru/files/lm2596.pdf" >даташите</a>, я продублирую её здесь.

<a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://static.catethysis.ru/files/lm2596_components.png" ><img src="http://static.catethysis.ru/files/lm2596_components.png" alt="Внешние компоненты LM2596" width="760" height="1000" /></a>

Выбор диода — самое простое. Нужно применить диод Шоттки или Ultrafast с предельным током минимум на 30% больше максимального тока индуктивности, и пробивным напряжением минимум на 25% больше максимального напряжения питания.

<h3 id="a2" align="left">
  Выходной ток и напряжение
</h3>

Модуль обеспечивает до 3 ампер (по даташиту — до 3.4 ампер, но стоит ограничиться меньшим. Мы не знаем параметров диода и дросселя — они могут быть выбраны на пределе). Впрочем, мы можем сами вычислить это значение.
  
Эффективность в режиме 12В –> 5В @ 3А составляет 80%. Проводим термодинамические расчёты: площадь платы конвертера равна 9см2, к тому же плата двухсторонняя. Значит, термосопротивление &#171;кристалл — окружающая среда&#187; будет равно примерно 35 град/Вт.

Температура кристалла не должна быть выше 150 градусов. При температуре окружающей среды в 25 градусов это градиент в 125 градусов, который соответствует выделению тепла в 125/35 = 3.57Вт. Это — те 20% энергии, которые остались внутри кристалла. На нагрузку ушли остальные 80%, т.е. 14.3Вт. При напряжении 5 вольт это ток 2.9 А.

КПД преобразователя сильно зависит от напряжения нагрузки (при 3.3В — до 75%, при 5В — до 80%, при 12В — до 90%, при 20В — до 95%), и немного зависит от входного — её максимум достигается при питании 20–30 вольтами. Конечно, нет никакого смысла гонять конвертер при небольшой разнице напряжений — его эффективность падает до 70%. Для получения большой мощности установите микросхему на радиатор, или примените двухстороннюю плату (а лучше — ещё больше слоёв меди), и соедините эти слои множеством переходных отверстий.

У модуля есть вход выключения, при котором устройство переходит в режим stand–by и потребляет меньше 0.1мА.

Конвертер качественно следит за точностью напряжения нагрузки — на всём диапазоне входных напряжений выходное не отклоняется сильнее 0.1%. Для установки выходного напряжения необходимо использовать резистивный делитель, дающий на вход feedback точно 1.23В. В нерегулируемых версиях такой делитель встроен в микросхемы.

Высокая частота преобразования (150 кГц) позволяет использовать индуктивность и конденсатор небольшого номинала и размера, правда не получится поставить самый дешёвый дроссель (материал дросселя должен иметь маленькую площадь петли гистерезиса, иначе на каждом цикле перемагничивания будет рассеиваться много тепла). Видимо, китайцы как раз на нём экономят — потому что он ощутимо греется на 3 амперах.

Неизвестен предельный ток этого дросселя, а он очень важен — даже при небольшом превышении сердечник дросселя уйдёт в насыщение, срезая фронты и обогащая сигнал высшими гармониками. Выходной конденсатор в их версии преобразователя поставлен точно не low ESR, поэтому фильтровать их он будет плохо. Имеет смысл зашунтировать выход керамикой около 1мкФ, установленной как можно ближе к выходу.

В устройстве присутствует несколько защит. Когда температура кристалла превышает предел 150 градусов, срабатывает термозащита и транзистор выключается. Также есть слежение за выходным током — при его превышении (выше 4.6А) устройство переходит на более низкую частоту, уменьшая потери в транзисторе, но при этом немного портится выходное напряжение. Этот порог немного увеличиватся с ростом его температуры, но не заходит за предел 4.8А.

### Некоторые замечания по применению {#a3}

<p align="left">
  Линию feedback располагайте как можно дальше от индуктивности, и ни в коем случае не залезайте ей в магнитный поток рассеяния дросселя — на неё наведутся помехи, которые вполне могут вывести стабилизатор в режим генератора. Резисторы задания напряжения в случае adj версии нужно располагать ближе к входу feedback микросхемы, чем к индуктивности.
</p>

<p align="left">
  Необходимо обеспечить кратчайший путь прохождения большого тока, особенно ВЧ (диод, дроссель и конденсатор). Входной и выходной конденсаторы желательно расположить как можно ближе к конвертеру, а диод и дроссель — вообще вплотную к ней и близко друг у другу.<br /> Нельзя водить эти проводники петлями, следует обеспечить малоиндуктивный путь. Например, подойдут короткие толстые проводники, а ещё лучше — целые плоскости меди. Более того, можно сделать двухстороннюю плату, тогда землю можно провести по нижней стороне платы, а все плюсовые проводники — по верхней.
</p>

<p align="left">
  Заодно такие обширные медные плоскости обеспечат хорошее &#171;испарение&#187; тепла.
</p>

<p align="left">
  Дроссель используйте с как можно меньшим потоком рассеяния — т.е. стержневые не подходят. Подходящими будут тороидальные или броневые, несколько хуже — Ш–типа.
</p>

<p align="left">
  Время срабатывания диода очень важно. Нужно использовать Шоттки (у них ещё и маленькое падение напряжения), либо UltraFast. Слишком быстрые ВЧ диоды тоже плохи — они генерируют широкий спектр помех.
</p>

<p align="left">
  Товарищ stalker29218 сделал на LM2596<a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://www.youtube.com/watch?v=JyKj7rbBuig" > аудиоусилитель D-класса</a>, просто подавая аудиосигнал на вход Feedback, и назвал эту микросхему &#171;холодным транзистором&#187;. Необычный подход, однако вряд ли стоит повторять эту конструкцию; хотя ничего волшебного тут нет, поскольку по сути &#8212; эта микросхема работает просто ШИМ-драйвером, управляемым напряжением. Такая схемотехника хороша и в усилителе (без обратной связи), и в стабилизаторе напряжения (будучи охваченной петлёй ООС) &#8212; это доказательство того, что на вход Feedback можно подавать что вам заблагорассудится (сверяясь с даташитом на LM2596, чтобы не выйти за пределы)
</p>

### Плавное включение

<p align="left">
  Интересен режим замедленного старта: на вход ON/OFF подключается RC–цепь (заряжаемая напряжением питания), и регулятор включается только после заряда конденсатора. Задержка пропорциональна постоянной времени RC–цепи. Это очень удобно при наличии нескольких одинаковых конвертеров, питающихся одним источником, поскольку при включении такой конвертер потребляет много энергии на заряд выходного конденсатора. Этот вариант также описан в даташите на LM2596.
</p>

<p align="left">
  Также к нему может быть подключен мощный потребитель с большим пусковым током (например, какой–либо двигатель), и одновременное включение всех таких цепей вызовет сильноточный импульс, сажая источник питания. Поэтому такие конвертеры будет правильным включать с разной задержкой — например, с разным номиналом резистора времязадающей RC–цепи.
</p>

Я использовал его во многих устройствах, и могу порекомендовать для максимально широкого применения. Конечно, при изготовлении изделия в конечном варианте логичнее будет не повторять этот регулятор на плате, а использовать более интересные stepdown-микросхемы вроде L5973D или ST10S.

### Теперь о минусах преобразователя {#a4}

<ol start="1" type="1">
  <li>
    Необходим внешний диод. Непонятно, почему его нельзя было сразу поместить внутрь корпуса.
  </li>
  <li>
    Конвертер простой и дешёвый, поэтому применён биполярный транзистор который и обуславливает не очень большую эффективность прибора. Если нужны малые потери — перейдите на что–то с полевым ключом внутри, а может и с встроенным диодом. Хотя можно поставить большой радиатор и добиться бОльшей выходной мощности.
  </li>
  <li>
    Нет модуляции рабочей частоты, как &#171;у взрослых&#187;. Без хаотического размытия частоты нельзя добиться низких значений ВЧ–выбросов и радиошума.
  </li>
  <li>
    Частота всё–таки не слишком высокая. Существуют драйверы и с частотой 1МГц — им нужен совсем микро–дроссель, но возникают проблемы выбора ВЧ комплектующих вроде транзистора и диода.
  </li>
  <li>
    Существуют микросхемы на полевых транзисторах с синхронным преобразованием (т.е. полумост), они гораздо экономичнее.
  </li>
</ol>

<p align="left">
  С другой стороны, все минусы уравновешиваются тем что это одна из самых простых и дешёвых микросхем для импульсных источников питания, и она подходит практически для любых не очень ответственных применений.
</p>
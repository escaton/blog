---
id: 178
title: Самодельный PoE
date: 2013-09-12T08:33:00+00:00
author: catethysis
layout: post
guid: http://catethysis.ru/?p=178
permalink: /diy-poe/
ratings_users:
  - 7
  - 7
  - 7
ratings_score:
  - 35
  - 35
  - 35
ratings_average:
  - 5
  - 5
  - 5
dsq_thread_id:
  - 2726356692
wp_noextrenallinks_mask_links:
  - 0
categories:
  - Питание
tags:
  - передача данных
  - питание
  - электроника
---
Иногда возникает задача запитать Ethernet-устройство, находящееся далеко от розеток 220В. Можно применить PoE, но покупные инжекторы недёшевы, да и лишние контакты уменьшают надёжность Ethernet-линка. Про нативную поддержку технологии я и не говорю &#8212; похоже, производители хотят снять с технологии все сливки, и сильно задирают цены.

Поэтому сделаем бюджетный вариант PoE самостоятельно.

<!--more-->

Сделать его можно двумя путями.

### Первый вариант, попроще.

Можно использовать <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://ru.wikipedia.org/wiki/Fast_Ethernet#.D0.92.D0.B0.D1.80.D0.B8.D0.B0.D0.BD.D1.82.D1.8B_.D1.80.D0.B5.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"  target="_blank">незадействованные линии</a> Ethernet в стандарте 100BASE-T (т.е. синюю и коричневую) &#8212; этот вариант прост, надёжен и лёгок в повторении. Разноимённые провода в каждой из пар замыкаем (синий с бело-синим, коричневый с бело-коричневым), и подаём на одну пару плюс, на другую минус.

### Второй вариант, резервный.

Второй вариант &#8212; вспомнить, что все дифпары в Ethernet гальванически развязаны, и рассмотреть стандартную схему входных каскадов любой сетевой карты:

[<img class="alignnone size-full wp-image-179" alt="ch2_eth_connection_separate" src="http://catethysis.ru/wp-content/uploads/2013/09/ch2_eth_connection_separate.png" width="250" height="187" />](http://catethysis.ru/wp-content/uploads/2013/09/ch2_eth_connection_separate.png)

Видим, что TX+ и TX- входят в трансформатор связи, имеющий отвод от средней точки. RX+ и RX- устроены аналогично. Значит, мы можем приподнять любую пару на любое (конечно, не слишком высокое) напряжение. Для этого нужно лишь подключить плюс и минус источника питания к средним точкам трансформаторов (на схеме это контакты 8 и 11). В некоторых сетевушках и роутерах дополнительно стоят уравнивающие резисторы на 75 ом &#8212; их нужно будет выпаять или разрезать дорожки, идущие к ним.

Теперь можно объединить два метода, и пустить каждую линию напряжения по двум парам. Например, &#171;плюс&#187; по оранжевой и коричневой, а &#171;минус&#187; по синей и зелёной. Этот метод пригодится, если требуется передавать сравнительно большой ток.

### Выбор напряжения

Передаваемая мощность прямо пропорциональна напряжению, но увлекаться его повышением не стоит &#8212; хоть изоляция жил и рассчитана на 300 вольт, но полагаться на китайские кабели нельзя. Нужно ограничиться 50 вольтами, ближайшее стандартное напряжение &#8212; 48 вольт. (надеюсь, понятно что речь идёт только о постоянном напряжении &#8212; оно не создаёт помех, и даёт возможность передать на 30% больше энергии чем переменное).

Важно понимать, что такая линия передачи будет иметь ненулевое сопротивление, и при хоть сколько-то существенном токе напряжение будет проседать. Допустим, от 5 вольт на 10-метровом кабеле при токе в 1 ампер останется уже 4.5 вольта, а этого может быть недостаточно для работы прибора. На высоких напряжениях этот эффект перестаёт быть заметен (кстати, это основная причина применения высоковольтных ЛЭП), т.к. падение в 0,5 вольта по сравнению с напряжением 50 вольт &#8212; это всего один процент.

### Выбор тока

Прямо сейчас держу в руках сетевой кабель, на нём маркировка <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://ru.wikipedia.org/wiki/%D0%90%D0%BC%D0%B5%D1%80%D0%B8%D0%BA%D0%B0%D0%BD%D1%81%D0%BA%D0%B8%D0%B9_%D0%BA%D0%B0%D0%BB%D0%B8%D0%B1%D1%80_%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BE%D0%B2#.D0.A2.D0.B0.D0.B1.D0.BB.D0.B8.D1.86.D0.B0_.D0.BF.D0.B5.D1.80.D0.B5.D0.B2.D0.BE.D0.B4.D0.B0_.D0.BD.D0.BE.D0.BC.D0.B5.D1.80.D0.BE.D0.B2_AWG_.D0.B2_.D0.B4.D1.8E.D0.B9.D0.BC.D1.8B_.D0.B8_.D0.BC.D0.B8.D0.BB.D0.BB.D0.B8.D0.BC.D0.B5.D1.82.D1.80.D1.8B"  rel="nofollow">24AWG</a>, и это ещё если верить китайцам на слово. Значит, площадь одной жилы 0.2мм², это максимум 1,5А.
  
Используем 4 пары — по двум парам плюс, по двум минус. В условиях жгута проводов предельный ток падает на 7% на каждый дополнительный провод — т.е. 7 доп. проводов * 7% = 49%. Получается, до 0.75А на каждую жилу, а их у нас 3 в каждую сторону — значит, можно передать максимум 2.25А.
  
Конечно, вроде как получается впритык, но никакой возможности расширения сети, да и не люблю я эксплуатировать оборудование на предельных режимах. Нужно обеспечить двукратный запас прочности, т.е. снизить ток до 1 ампера.

Стандартная плотность тока в меди 8 А/мм² — конечно, правильная цифра, но всегда забывают условия её применимости, а это один провод без изоляции — то есть, имеющий хороший теплообмен с окружающей средой. В кабеле Ethernet тепловые условия гораздо хуже — несколько изолированных проводов рядом (греют друг друга), под общей изоляцией. А поскольку внешняя изоляция не вплотную к проводам, воздушный промежуток работает как теплоизолятор — вроде шубы.
  
Самое смешное что я видел Ethernet-кабели из обмеднённого алюминия, даже дорогие — для них ток нужно уменьшать ещё в два раза. Так ведь это не проверить никак. Более того, ещё часто делают так — уменьшают толщину синей и коричневой пар (тех, которые не используются в 100Base-T).

### Мощность

Таким образом, из максимального напряжения 50 вольт и тока в 1А получаем мощность 50Вт. Думаю, этого хватит любому сетевому оборудованию, которое только можно представить в домашних условиях. И я должен сказать, что передавать 1 ампер по хлипким сетевым разъёмам, которые иногда и информационный сигнал передают с трудом &#8212; это верх безрассудства, и делать так стоит только с новыми кабелями и разъёмами, если вы чётко понимаете, что делаете. Также лучше не двигать это соединение, чтобы не ухудшить контакт. В остальных случаях нужно ограничиться 20 ваттами.

### Инжектор и сплиттер

Подавать напряжение в кабель можно несколькими способами. Если вы остановились на 12 вольтах &#8212; просто берём их с компьютерного блока питания (так очень удобно питать роутер от компьютера, подключённого к нему). Если же применять 48 вольт, то потребуется специальный блок питания, вроде какого-нибудь AC-DC конвертера.

На стороне приёмника установим [преобразователь](http://catethysis.ru/?p=18 "DC-DC преобразователь LM2596"), и получим любое нужное прибору напряжение, скорее всего 9 или 12 вольт.

Обязательно нужно поставить конденсаторы (электролиты на пару сотен мкФ + керамику или лучше плёнку на 10-100 нФ) на обоих концах линии, чтобы не превращать её в антенну.

Конечно, здесь нет никакого контроля за состоянием линии, за потребностями приёмников &#8212; всего того, что есть в стандарте PoE. Однако далеко не все производители таких устройств сами полностью следуют стандарту. Многие реализуют <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://ru.wikipedia.org/wiki/Power_over_Ethernet#Passive_PoE"  target="_blank">Passive PoE</a>, который полностью идентичен рассмотренной нами самоделке <img src="http://catethysis.ru/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />
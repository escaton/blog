---
id: 420
title: 'Butterfly Labs &#8212; приехал девайс Little Single 30GH/s'
date: 2013-09-28T12:47:33+00:00
author: catethysis
layout: post
guid: http://catethysis.ru/?p=420
permalink: /butterfly-labs-little-single-30ghs/
notely:
  - 
  - 
  - 
wp_noextrenallinks_mask_links:
  - 0
  - 0
  - 0
ratings_users:
  - 1
  - 1
  - 1
ratings_score:
  - 5
  - 5
  - 5
ratings_average:
  - 5
  - 5
  - 5
dsq_thread_id:
  - 2726263924
categories:
  - Биткойн
tags:
  - биткойн
---
Спустя 10 месяцев ожидания ко мне приехал Little Single 30GH/s. Много было копий сломано за это время &#8212; кто-то не верил в Butterfly Labs изначально, кто-то психовал и отменял заказ, ну а я дождался. Сразу скажу что девайс оправдал себя полностью, хоть и не сразу.

TL;DR &#8212; используйте <del>deepbit.net UPD!!! 50btc.com UPD!!! itzod.ru</del> UPD!!! btcguild.com и снимите с майнера крышку.

[<img class="alignnone  wp-image-431" alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05519-1024x575.jpg" width="785" height="441" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05519.jpg)

<!--more-->

Для начала, очень мало информации о его использовании. Штатная тулза EasyMiner, похоже, просто GUI-фронтенд для обычных майнеров с красивыми графиками. Так ладно бы она работала &#8212; но у меня не получилось ей даже начать майнить.<figure style="width: 618px;" class="wp-caption aligncenter">

<img alt="Интерфейс программы EasyMiner" src="http://static.catethysis.ru/files/btc_step_0.png" width="618" height="778" /><figcaption class="wp-caption-text">Красивый интерфейс &#8212; это всё, на что способна эта программа.</figcaption></figure> 

Поэтому переключаемся на привычный путь &#8212; консольные майнеры.

## Регистрация в майнинг-пуле

Первое, что нужно сделать &#8212; зарегистрироваться в майнинг-пуле. Пул это сервис, который получает пакет для обсчёта и посылает его по частям на все зарегистрированные устройства &#8212; примерно так же, как в распределённых вычислениях. Конечно, при такой мощности устройства вы можете вычислять сами, в соло-режиме &#8212; но на вычисление одного блока (и получение награды) уходит очень много времени, и всё это время вы не уверены в результате. Конечно, в итоге всё равно когда-то (месяцев через десять) вы получите награду, и в среднем будет такой же доход как при работе в пуле &#8212; но в пуле этот процесс гораздо плавнее и равномернее. Можете хоть каждый час видеть, что вам на счёт упало ещё 0.01BTC <img src="http://catethysis.ru/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />
  
Я использую пул deepbit.net &#8212; не знаю, почему. Когда-то давно использовал его ещё для майнинга на процессоре и видеокарте, вот и остался на нём.

Регистрируемся.

<img class="aligncenter" alt="Регистрация в deepbit.net" src="http://static.catethysis.ru/files/btc_step_1.png" width="750" height="739" />

После регистрации у нас появляется воркер.

<img class="aligncenter" alt="Воркер в deepbit.net" src="http://static.catethysis.ru/files/btc_step_2.png" width="757" height="570" />

Теперь нужно установить программу, которая будет получать данные от пула и отправлять их для вычислений в майнер &#8212; bfgminer. Простая программа, требует минимум движений, и работает. Прямая ссылка на скачивание <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://luke.dashjr.org/programs/bitcoin/files/bfgminer/3.2.1/bfgminer-3.2.1-win64.zip"  target="_blank">bfgminer</a> для windows 64-бит.

## Использование bfgminer

Для неё удобно сделать bat-файл со всеми параметрами, который будет запускать её с уже настроенным пулом и адресами воркеров.

<pre>#содержимое run.bat

bfgminer -o http://pit.deepbit.net:8332 -u <em>имя_воркера</em> -p <em>пароль</em></pre>

имя воркера &#8212; это &#171;логин минера&#187; на предыдущем слайде. В моём случае это &#171;catethysis@gmail.com_1&#8243;, потому что я создавал двух дополнительных воркеров, и работаю на последнем из них. Пароль &#8212; это пароль воркера.

Окей, запускаем!

<img class="aligncenter" alt="Диалог майнера bfgminer" src="http://static.catethysis.ru/files/btc_step_4.png" width="642" height="301" />

Процесс идёт, блоки считаются, денежка капает.

## Вывод денег

Для вывода я использую btc-e.com &#8212; криптобиржа, на которой можно переводить биткойны в рубли, доллары, евро и другие криптовалюты.

<img class="aligncenter" alt="Вывод денег от майнинга - биржа btc-e.com" src="http://static.catethysis.ru/files/btc_step_5.png" width="997" height="670" />

## Проблемы

Мой экземпляр считалки оказался бракованным &#8212; выдаёт максимум 7.5ГХ/с при обещанных 30. Списался с поддержкой, те ответили на удивление быстро, спустя всего час! Полгода назад ответа можно было спокойно ждать неделями. Уточнили тип девайса, и ответили следующее:

<pre>Hi Nikolay,
I am sorry your miner isn’t performing as expected. Your RMA ID is ...
Please return your unit to us:
10770 El Monte St. Suite 101, Overland Park, KS 66211
Please write the RMA ID on at least two sides of the box, and if possible, print and include this email in your return; it will help expedite the return process.
We will contact you when we have received your unit.
Again, I apologize for the inconvenience,
Scott
Butterfly Labs, Inc</pre>

Я решил не пороть горячку, и попробовать что-то сделать самостоятельно. Во-первых, гугл говорит о <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/https://forums.butterflylabs.com/jalapeno-single-sc-support/4413-so-dissapointed-30gh-s-miner-running-slower-than-jala.html"  target="_blank">таком треде</a>, и один из участников сообщает о точно таких же симптомах, как у меня: <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/https://forums.butterflylabs.com/jalapeno-single-sc-support/4413-so-dissapointed-30gh-s-miner-running-slower-than-jala.html#post53793"  target="_blank">When running BFG Miner, it reports a max of 7.5Gh/s</a>. Там рекомендуют поставить cgminer. Интересно что 7.5 &#8212; это ровно четверть от 30. А в устройстве стоит 8 чипов. Значит, у меня работают всего два чипа из восьми? Это можно узнать с помощью опции &#8212;per-device-stats. После запуска майнера нажимайте M, и в этом меню прокручивайте список стрелками вверх-вниз.

<img class="aligncenter" alt="Статистика по ядрам в bfgminer" src="http://static.catethysis.ru/files/btc_step_6.png" width="660" height="342" />

Похоже, что всё не так просто: пять ядер работают на 40% от максимума (один процессор butterflylabs вычисляет 3.75ГХ/с), два почти не работают, а одно и вовсе дохлое. Неясно, что происходит.

Если честно, то и пул deepbit.net уже издох, а я слышал о проблемах со стабильностью майнинга на ASIC именно из-за пула. Хорошо, мы пойдём другим путём! Всё переделываем! Регистрируемся на 50btc.com, разбираем чёрную коробку чтобы она лучше охлаждалась и всё делаем с нуля &#8212; с создания нового кошелька.

## Создаём кошелёк

Скачиваем bitcoin-qt, запускаем, десять часов ждём окончания синхронизации (пока необязательный пункт).

<img class="aligncenter" alt="Синхронизация bitcoin с сетью" src="http://static.catethysis.ru/files/btc_step_6.png" width="866" height="221" />

## Регистрируемся на 50btc.com

Регистрация проста, настройки &#8212; те же, что и в предыдущем случае. Только адрес пула нужно сменить на pool.50btc.com. Вступаем в команду BFL maniacs.

## Трепеща, дрожащей рукой включаем майнер

И видим, что скорость волшебным образом подскакивает до оплаченных 30ГХ/с, и даже больше!<img class="aligncenter" alt="Работа майнера ButterflyLabs Little Single через bfgminer в пуле 50BTC.com" src="http://static.catethysis.ru/files/btc_step_9.png" width="660" height="342" />Мораль проста &#8212; не будьте <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/http://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BD%D0%B4%D1%80%D0%BE%D0%BC_%D1%83%D1%82%D1%91%D0%BD%D0%BA%D0%B0"  target="_blank">утятами</a>, следите за трендами и работайте с лидерами.

**ОЧЕРЕДНОЕ ОБНОВЛЕНИЕ!!!** Используйте пока itzod.ru, т.к. на 50btc.com идёт DDoS-атака, которая роняет скорость счёта в среднем до 15ГХ/с. На itzod.ru скорость майнинга стабильно держится на 32 ГХ/с, иногда поднимаясь до 34. Другие пулы никогда не давали выше 30 ГХ/с, разве что на 50btc иногда бывало 31.

Всё-таки все русские пулы оказались неустойчивыми к DoS, поэтому я перешёл на BTCGuild.com, чего и вам советую.

[Мой обзор перспективных майнеров](http://catethysis.ru/index.php/%d0%be%d0%b1%d0%b7%d0%be%d1%80-%d0%bf%d0%b5%d1%80%d1%81%d0%bf%d0%b5%d0%ba%d1%82%d0%b8%d0%b2%d0%bd%d1%8b%d1%85-bitcoin-%d0%bc%d0%b0%d0%b9%d0%bd%d0%b5%d1%80%d0%be%d0%b2/ "Обзор перспективных Bitcoin-майнеров").

## Решение проблемы шума

Little Single очень сильно шумит. При нём невозможно не то что спать, даже сидеть рядом долгое время. Причина &#8212; плохо рассчитанная аэродинамика устройства. Вообще, про странные инженерные решения в девайсе можно сказать много:

  * Нафига такие толстые перфорированные стенки? Раза в три тоньше можно было сделать, плюс маленькие рёбра жёсткости.
  * Нафига вообще все радиаторы под платой? Можно было наклеить сверху, было бы лучше.
  * Нафига один из радиаторов приклеен под батарею электролитических конденсаторов? Ума не приложу, зачем они это сделали.
  * Ну и конечно, самое интересное &#8212; утолщение радиатора (т.е. место откуда надо собрать больше всего тепла) находится в аэродинамической тени шпинделя вентилятора, аккурат за его осью и мотором. Гениально!

По-моему, 60% воздуха проходит через устройство транзитом. Я поставил девайс так чтобы он засасывал воздух прямо с улицы (за окном +5 градусов) &#8212; из него вылетал холодный воздух, а температура в консоли упала всего на один градус. Радиатор наощупь был тёплый &#8212; такой же тёплый, когда девайс стоял в отапливаемой комнате.

Так вот, шум появляется из-за неправильных решёток ввода и вывода воздуха. Они имеют много мелких дырок с острыми краями &#8212; совершенно необтекаемая конструкция, вызывающая сильную турбулентность, шум и ослабление потока воздуха. Попробуйте снять крышку и обе вентиляционные решётки прибора &#8212; шум даже при полной нагрузке уменьшится до совершенно комфортного. Так ещё и охлаждение лучше. Но если не хотите оставлять девайс открытым &#8212; можно применить специальные гладкие вентиляционные решётки, сваренные из проволочек, на них турбулентность минимальна.

После такого изменения пропадает необходимость уносить устройство в серверную или куда-то ещё.

## Фотографии разобранного майнера ButterflyLabs Little Single

На плате присутствует множество BGA-чипов &#8212; неудивительно, что её так долго делали. Похоже, не стоит подвергать плату сильным перепадам температуры, т.к. BGA-чипы её не любят из-за своих хрупких ножек.
  
Общение с USB происходит через микросхему USB-UART моста FT2232H. Процессор Atmel формирует задания для чипов.

## [<img class="alignnone  wp-image-436" alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05556-1024x575.jpg" width="785" height="441" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05556.jpg)

Тот же микроконтроллер Atmel с другого ракурса. ПЛИС Xilinx (под чёрным маленьким радиатором, вблизи большого радиатора) общается с хеш-чипами на высокой скорости (250МГц) и передаёт задания им.
  
Плата рассчитана на обе версии, 30 и 60ГХ/с. На 30-ГХ модели установлена только половина хеш-чипов.[<img class="alignnone  wp-image-435" alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05538-1024x575.jpg" width="785" height="441" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05538.jpg)

Используются твёрдотельные конденсаторы &#8212; не высохнут и не испортят хеш-чипы.[<img class="alignnone  wp-image-434" alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05536-1024x575.jpg" width="785" height="441" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05536.jpg)

Мощное выделение тепла (400Вт) заставило инженеров применить радиатор на тепловых трубках. Питается майнер от коннектора питания, подобного видеопитанию.[<img class="alignnone  wp-image-433" alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05533-1024x575.jpg" width="785" height="441" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05533.jpg)

Вторая часть майнера крупным планом. Посадочные места для 8 чипов, керамические конденсаторы по питанию (как-то их маловато!), сверху &#8212; нераспаянная система питания. Видим, что применяется 3-фазное питание полумостами.

[<img class="alignnone size-large wp-image-432" alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05529-575x1024.jpg" width="575" height="1024" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05529.jpg)

Разобранный майнер во включённом состоянии, прямо сейчас он считает хеши со скоростью 30 млрд штук в секунду. Шумит гораздо меньше чем собранный.

## [<img alt="SONY DSC" src="http://catethysis.ru/wp-content/uploads/2013/09/DSC05562-1024x575.jpg" width="785" height="441" />](http://catethysis.ru/wp-content/uploads/2013/09/DSC05562.jpg)
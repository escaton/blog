---
id: 1100
title: Исследование спектра прямоугольного сигнала платой Red Pitaya
date: 2014-03-18T18:48:12+00:00
author: catethysis
layout: post
guid: http://catethysis.ru/?p=1100
permalink: /red_pitaya_square_signal/
ratings_users:
  - 2
  - 2
  - 2
ratings_score:
  - 10
  - 10
  - 10
ratings_average:
  - 5
  - 5
  - 5
notely:
  - 
  - 
  - 
wp_noextrenallinks_mask_links:
  - 0
  - 0
  - 0
dsq_thread_id:
  - 2735286538
categories:
  - Red Pitaya
  - Исследования
tags:
  - red pitaya
  - электроника
---
При изучении прямоугольного сигнала [спектрографом Red pitaya](http://catethysis.ru/index.php/%d0%bf%d1%80%d0%b8%d0%b5%d1%85%d0%b0%d0%bb%d0%b0-%d0%bf%d0%bb%d0%b0%d1%82%d0%b0-red-pitaya/ "Приехала плата Red Pitaya") была обнаружена картина, отличающаяся от описания идеального прямоугольника в учебниках &#8212; в спектре откуда-то появились чётные гармоники, которых не должно быть вообще. Я провёл исследование этого вопроса, и нашёл ответ.

<!--more-->

Напомню условия эксперимента. Подаю прямоугольный сигнал частотой 10 МГц и амплитудой 710 мВ через метровый кабель на первый аналоговый вход платы red pitaya, и снимаю его спектрограмму. Получаю такую картину:

[<img class="alignnone size-full wp-image-1134" alt="pitaya_spectrum_square_crop" src="http://catethysis.ru/wp-content/uploads/2014/03/pitaya_spectrum_square_crop.png" width="670" height="360" />](http://catethysis.ru/wp-content/uploads/2014/03/pitaya_spectrum_square_crop.png)

Здесь видно несколько интересных пиков, каждый из которых я попробую отнести.

Выделим главные пики &#8212; это 10, 30, 50 и 55 МГц, их уровень выше -40дБ. Более слабые пики это 0, 2.5, 20, 35, 40, 45, 60 МГц &#8212; их уровень от -40 до -70дБ.

## Отнесение главных пиков

Главный пик 10 МГц &#8212; это основная частота сигнала. Тут всё понятно, идём дальше.

Пики 30 и 50 МГц &#8212; нечётные гармоники основной частоты, как и должно быть: известно что прямоугольный сигнал имеет в спектре только нечётные гармоники (3f, 5f,&#8230;) с амплитудой 1/3, 1/5&#8230;. Таким образом, эти пики тоже понятны. 7 гармонику (70МГц) не видно, т.к. предел осциллографа &#8212; 62.5МГц.
  
Однако, на частоте 55 МГц тоже высокий пик &#8212; особенно подозрительно то, что его амплитуда очень похожа на ту, которая должна быть у 7 гармоники. Так и есть &#8212; это **зеркальная частота** 7 гармоники.
  
Вспомним, что осциллограф имеет частоту дискретизации 62.5 МГц. Таким образом, 70 МГц отражаются и создают зеркальную частоту 62.5 * 2 &#8212; 70 = 55 МГц.

Все главные пики отнесены.

## Отнесение слабых пиков

Пики 20, 40 и 60 МГц по своим частотам похожи на чётные гармоники сигнала 10 МГц. Но ведь их не должно быть! Идеальный прямоугольный сигнал содержит только нечётные гармоники &#8212; в каждой полуволне должно уместиться нечётное количество полуволн синуса, чтобы полуволна была симметрична относительно середины.

Чётные же гармоники они могут возникнуть только если полуволна несимметрична, т.е. правая и левая половины отличаются друг от друга. Почему так может произойти? Потому что фронты и спады сигнала размыты!
  
Вот и ответ на вопрос. Либо генератор плохой, либо (скорее всего) кабель вносит свои искажения и размывает фронты.

0 МГц &#8212; постоянное смещение &#8212; возможно, сам канал осциллографа имеет ненулевое смещение, я пока не калибровал его. Также возможно генератор тоже имеет ненулевую постоянную составляющую.

Остались 5, 35, 45 МГц.
  
35 и 45 &#8212; скорее всего, зеркальные девятая и восьмая гармоники. Их маленькая амплитуда объясняется высоким затуханием в кабеле на частотах 80 и 90 МГц.

А вот немаленький пик 2.5 МГц я объяснить затрудняюсь. Однако он присутствует в спектре в обоих каналах при неподключенных щупах, так что это какой-то шум в самом приборе.

[<img class="alignnone size-full wp-image-1141" alt="pitaya_spectrum_unplugged" src="http://catethysis.ru/wp-content/uploads/2014/03/pitaya_spectrum_unplugged.png" width="697" height="477" />](http://catethysis.ru/wp-content/uploads/2014/03/pitaya_spectrum_unplugged.png)

Ещё можно прочитать про [связь между аналоговыми входами (т.е. crosstalk) в Red Pitaya.](http://catethysis.ru/index.php/%d1%81%d0%b2%d1%8f%d0%b7%d1%8c-%d0%bc%d0%b5%d0%b6%d0%b4%d1%83-%d0%b2%d1%85%d0%be%d0%b4%d0%bd%d1%8b%d0%bc%d0%b8-%d0%ba%d0%b0%d0%bd%d0%b0%d0%bb%d0%b0%d0%bc%d0%b8-crosstalk-%d0%b2-red-pitaya/ "Связь между входными каналами (crosstalk) в Red Pitaya")
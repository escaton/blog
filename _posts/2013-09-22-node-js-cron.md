---
id: 306
title: Расписания — cron / node.js
date: 2013-09-22T07:29:33+00:00
author: catethysis
layout: post
guid: http://catethysis.ru/?p=306
permalink: /node-js-cron/
notely:
  - 
  - 
  - 
wp_noextrenallinks_mask_links:
  - 0
  - 0
  - 0
ratings_users:
  - 2
  - 2
  - 2
ratings_score:
  - 10
  - 10
  - 10
ratings_average:
  - 5
  - 5
  - 5
dsq_thread_id:
  - 2729793602
categories:
  - Модули node.js
  - Руководства
tags:
  - node.js
  - модули
---
Иногда возникает задача запускать приложение на [node.js](http://catethysis.ru/index.php/node-js/ "node.js — что это?") по расписанию &#8212; допустим, раз в час. Ведь node.js — это не только веб-сервер, это ещё и удобный скриптовый движок которым можно решать задачи, не требующие создания сервера либо вообще не связанные с вебом.

Стандартный линуксовый cron, к сожалению, тяжело настроить для такой цели. Но и не нужно, потому что существует модуль <a target="_blank" rel="nofollow" href="http://catethysis.ru/goto/https://github.com/ncb000gt/node-cron"  target="_blank">node-cron</a>!

<!--more-->

Устанавливается он командой npm install cron и предоставляет удобный API для создания расписаний выполнения. Рассмотрим простой пример его применения.

<pre>var cronJob=require('cron').CronJob;

new cronJob('* 25 * * * *', function(){
    console.log('Наступила двадцать пятая минута часа');
}</pre>

Как видим, использовать его очень легко. Синтаксис расписания &#8212; такой же, как и у стандартного cron, однако напомню основные его положения.

Пять элементов, разделённых пробелами, задают время выполнения таким образом: &#171;секунда минута час день месяц день_недели&#187;.  На месте каждого элемента может находиться число, список/диапазон чисел или звёздочка. Каждую минуту все задания cron проверяются на совпадение с текущей датой и временем, и при совпадении задание выполняется.
  
Если в элементе находится число &#8212; то выбранная часть даты/времени будет проверяться на совпадение с этим числом. Например, &#171;\* 57 \* \* 5 2&#8243; будет срабатывать в каждый вторник мая в каждую 57-ю минуту — в 00:57:00, в 01:57:00 и так далее. &#171;\* 0 \* \* \* \*&#187; будет срабатывать каждое начало часа.Если в элементе находится выражение — список или диапазон, например &#171;\* 28-31 \* \* \* 5-6&#8243; сработает каждую пятницу и субботу с 28 по 31 минуту. Также можно указывать более осмысленные расписания, например &#171;\* \*/5 \* \* \* \*&#187; — каждая пятая минута, задание будет выполняться раз в пять минут. Ну а &#171;\* \*/5 9-18 \* \* \* \*&#187; — раз в пять минут, но если время — с 9 часов утра по 6 вечера. Можно поставить туда echo &#171;не отвлекайся на консоль, работай!&#187;

Эта штука полезна, например, для ежечасной или ежедневной проверки обновлений.